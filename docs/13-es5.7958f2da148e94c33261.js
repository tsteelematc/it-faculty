function asyncGeneratorStep(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(u){return void a(u)}o.done?e(c):Promise.resolve(c).then(n,r)}function _asyncToGenerator(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var i=t.apply(e,a);function s(t){asyncGeneratorStep(i,n,r,s,o,"next",t)}function o(t){asyncGeneratorStep(i,n,r,s,o,"throw",t)}s(void 0)}))}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{HaBs:function(t,e,a){"use strict";a.r(e),a.d(e,"amplify_authenticator",(function(){return d}));var n=a("bRKV"),r=a("Nt7R"),i=a("Qycn"),s=a("s1tr"),o=a("TESy"),c=a("v4IS"),u=(a("yMAf"),a("/vcS")),h=a("LBa2"),l=a("RzDJ"),f=new r.a("Authenticator"),d=function(){function t(e){var a=this;_classCallCheck(this,t),Object(n.k)(this,e),this.initialAuthState=s.a.SignIn,this.handleAuthStateChange=function(){},this.authState=s.a.Loading,this.toastMessage="",this.handleExternalAuthEvent=function(t){var e=t.payload;switch(e.event){case"cognitoHostedUI":case"signIn":Object(l.a)(e.data,h.d);break;case"cognitoHostedUI_failure":case"parsingUrl_failure":case"signOut":case"customGreetingSignOut":return Object(h.d)(a.initialAuthState)}},this.handleToastEvent=function(t){var e=t.payload;switch(e.event){case u.h:e.message&&(a.toastMessage=e.message)}}}var e,a,r;return _createClass(t,[{key:"componentWillLoad",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(h.h)((function(t,e){a.onAuthStateChange(t,e),a.toastMessage=""})),i.a.listen(u.i,this.handleToastEvent),i.a.listen(u.a,this.handleExternalAuthEvent),Object(o.j)("amplify-authenticator"),e=localStorage.getItem(u.f),localStorage.removeItem(u.f),t.t0="true"!==e,!t.t0){t.next=7;break}return t.next=7,this.checkUser();case 7:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"checkUser",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.a&&"function"==typeof c.a.currentAuthenticatedUser){t.next=2;break}throw new Error(u.d);case 2:return t.abrupt("return",c.a.currentAuthenticatedUser().then((function(t){Object(h.d)(s.a.SignedIn,t)})).catch(_asyncToGenerator(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=null;try{a=localStorage.getItem(u.l)}catch(n){f.debug("Failed to get the auth state from local storage",n)}if(t.prev=2,t.t0=a===s.a.SignedIn,!t.t0){t.next=7;break}return t.next=7,c.a.signOut();case 7:Object(h.d)(e.initialAuthState),t.next=13;break;case 10:t.prev=10,t.t1=t.catch(2),f.debug("Failed to sign out",t.t1);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))));case 3:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"onAuthStateChange",value:(e=_asyncToGenerator(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",f.error("nextAuthState cannot be undefined"));case 2:f.info("Inside onAuthStateChange Method current authState:",this.authState),this.authState=e===s.a.SignedOut?this.initialAuthState:e,this.authData=a,this.authData&&f.log("Auth Data was set:",this.authData),this.authState===e&&(this.handleAuthStateChange(this.authState,this.authData),f.info("authState has been updated to ".concat(this.authState)));case 3:case"end":return t.stop()}}),t,this)}))),function(t,a){return e.apply(this,arguments)})},{key:"renderAuthComponent",value:function(t){switch(t){case s.a.SignIn:return Object(n.i)("slot",{name:"sign-in"},Object(n.i)("amplify-sign-in",{federated:this.federated,usernameAlias:this.usernameAlias}));case s.a.ConfirmSignIn:return Object(n.i)("slot",{name:"confirm-sign-in"},Object(n.i)("amplify-confirm-sign-in",{user:this.authData}));case s.a.SignUp:return Object(n.i)("slot",{name:"sign-up"},Object(n.i)("amplify-sign-up",{usernameAlias:this.usernameAlias}));case s.a.ConfirmSignUp:return Object(n.i)("slot",{name:"confirm-sign-up"},Object(n.i)("amplify-confirm-sign-up",{user:this.authData,usernameAlias:this.usernameAlias}));case s.a.ForgotPassword:return Object(n.i)("slot",{name:"forgot-password"},Object(n.i)("amplify-forgot-password",{usernameAlias:this.usernameAlias}));case s.a.ResetPassword:return Object(n.i)("slot",{name:"require-new-password"},Object(n.i)("amplify-require-new-password",{user:this.authData}));case s.a.VerifyContact:return Object(n.i)("slot",{name:"verify-contact"},Object(n.i)("amplify-verify-contact",{user:this.authData}));case s.a.TOTPSetup:return Object(n.i)("slot",{name:"totp-setup"},Object(n.i)("amplify-totp-setup",{user:this.authData}));case s.a.Loading:return Object(n.i)("slot",{name:"loading"},Object(n.i)("div",null,"Loading..."));case s.a.SignedIn:return[Object(n.i)("slot",{name:"greetings"}),Object(n.i)("slot",null)];default:throw new Error("Unhandled auth state: ".concat(t))}}},{key:"componentWillUnload",value:function(){return i.a.remove(u.a,this.handleExternalAuthEvent),i.a.remove(u.i,this.handleToastEvent),h.h}},{key:"render",value:function(){var t=this;return Object(n.i)(n.b,null,this.toastMessage?Object(n.i)("amplify-toast",{message:this.toastMessage,handleClose:function(){t.toastMessage=""},"data-test":"authenticator-error"}):null,this.authState===s.a.SignedIn?this.renderAuthComponent(this.authState):Object(n.i)("div",{class:"auth-container"},this.renderAuthComponent(this.authState)))}}]),t}();d.style=":host{--background-color:var(--amplify-background-color);--width:28.75rem;--min-width:20rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;--box-shadow:1px 1px 4px 0 rgba(0, 0, 0, 0.15);--border-radius:6px;--padding:35px 40px;--margin-bottom:20px;--container-height:100vh;--container-display:flex;--container-justify:center;--container-align:center}.auth-container{display:var(--container-display);-ms-flex-pack:var(--container-justify);justify-content:var(--container-justify);-ms-flex-align:var(--container-align);align-items:var(--container-align);min-height:var(--container-height)}"}}]);