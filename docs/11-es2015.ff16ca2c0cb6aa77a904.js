(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{pptk:function(t,e,n){"use strict";n.r(e),n.d(e,"amplify_amazon_button",(function(){return l})),n.d(e,"amplify_auth0_button",(function(){return f})),n.d(e,"amplify_facebook_button",(function(){return I})),n.d(e,"amplify_google_button",(function(){return m})),n.d(e,"amplify_oauth_button",(function(){return b}));var i=n("bRKV"),a=n("Nt7R"),o=n("JIIv"),r=n("s1tr"),s=n("v4IS"),c=n("yMAf"),h=n("/vcS"),u=n("LBa2");const d=new a.a("amplify-amazon-button"),l=class{constructor(t){Object(i.k)(this,t),this.handleAuthStateChange=u.d,this.federatedSignIn=t=>{const{access_token:e,expires_in:n}=t;if(!e)return;if(!s.a||"function"!=typeof s.a.federatedSignIn||"function"!=typeof s.a.currentAuthenticatedUser)throw new Error(h.d);const i=1e3*n+(new Date).getTime();window.amazon.Login.retrieveProfile(async t=>{if(!t.success)return d.debug("Get user Info failed");const n={name:t.profile.Name,email:t.profile.PrimaryEmail};await s.a.federatedSignIn("amazon",{token:e,expires_at:i},n);const a=await s.a.currentAuthenticatedUser();this.handleAuthStateChange(r.a.SignedIn,a)})}}signInWithAmazon(t){t.preventDefault(),window.amazon.Login.setClientId(this.clientId),window.amazon.Login.authorize({scope:"profile"},t=>{if(t.error)return d.debug("Failed to login with amazon: "+t.error);try{window.localStorage.setItem(h.s,JSON.stringify({provider:"amazon"}))}catch(e){d.debug("Failed to cache auth source into localStorage",e)}this.federatedSignIn(t)})}render(){return Object(i.i)("amplify-sign-in-button",{onClick:t=>this.signInWithAmazon(t),provider:"amazon"},Object(i.i)("script",{src:"https://assets.loginwithamazon.com/sdk/na/login1.js"}),o.a.get(c.a.SIGN_IN_WITH_AMAZON))}},g=new a.a("amplify-auth0-button"),f=class{constructor(t){Object(i.k)(this,t),this.handleAuthStateChange=u.d,this.handleLoad=()=>{const{oauth:t={}}=s.a.configure(),{config:e=t.auth0}=this;e?(g.debug("auth0 configuration",e),this._auth0||(this._auth0=new window.auth0.WebAuth(e)),this._auth0.parseHash((t,n)=>{if(t)return void g.debug("Failed to parse the url for Auth0",t);if(!n)return void g.debug("Auth0 found no authResult in hash");const i={provider:"auth0",opts:{returnTo:e.returnTo,clientID:e.clientID,federated:e.federated}};try{localStorage.setItem(h.s,JSON.stringify(i))}catch(a){g.debug("Failed to cache auth source into localStorage",a)}this._auth0.client.userInfo(n.accessToken,async(t,i)=>{let a=void 0,o=void 0;t?g.debug("Failed to get the user info",t):(a=i.name,o=i.email),await s.a.federatedSignIn(e.domain,{token:n.idToken,expires_at:1e3*n.expiresIn+(new Date).getTime()},{name:a,email:o});const c=await s.a.currentAuthenticatedUser();this.handleAuthStateChange(r.a.SignedIn,c)})})):g.debug("Auth0 is not configured")}}signInWithAuth0(t){if(t.preventDefault(),!this._auth0)throw new Error("the auth0 client is not configured");this._auth0.authorize()}render(){return Object(i.i)("amplify-sign-in-button",{onClick:t=>this.signInWithAuth0(t),provider:"auth0"},Object(i.i)("script",{onLoad:this.handleLoad,src:"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"}),o.a.get(c.a.SIGN_IN_WITH_AUTH0))}},p=new a.a("amplify-facebook-button"),I=class{constructor(t){Object(i.k)(this,t),this.handleAuthStateChange=u.d,this.federatedSignIn=t=>{const{accessToken:e,expiresIn:n}=t;if(!e)return;if(!s.a||"function"!=typeof s.a.federatedSignIn||"function"!=typeof s.a.currentAuthenticatedUser)throw new Error(h.d);const i=1e3*n+(new Date).getTime();window.FB.api("/me",{fields:"name,email"},async t=>{const n={name:t.name,email:t.email};await s.a.federatedSignIn("facebook",{token:e,expires_at:i},n);const a=await s.a.currentAuthenticatedUser();this.handleAuthStateChange(r.a.SignedIn,a)})},this.getLoginStatus=()=>{window.FB.getLoginStatus(t=>{try{window.localStorage.setItem(h.s,JSON.stringify({provider:"facebook"}))}catch(e){p.debug("Failed to cache auth source into localStorage",e)}if("connected"===t.status)return this.federatedSignIn(t.authResponse);this.login()})},this.login=()=>{window.FB.login(t=>{t&&t.authResponse&&this.federatedSignIn(t.authResponse)},{scope:"public_profile,email"})}}signInWithFacebook(t){t.preventDefault(),window.FB.init({appId:this.appId,cookie:!0,xfbml:!1,version:"v5.0"}),this.getLoginStatus()}render(){return Object(i.i)("amplify-sign-in-button",{onClick:t=>this.signInWithFacebook(t),provider:"facebook"},Object(i.i)("script",{async:!0,defer:!0,src:"https://connect.facebook.net/en_US/sdk.js"}),o.a.get(c.a.SIGN_IN_WITH_FACEBOOK))}},w=new a.a("amplify-google-button"),m=class{constructor(t){Object(i.k)(this,t),this.handleAuthStateChange=u.d,this.handleError=t=>{console.error(t)},this.handleLoad=()=>{window.gapi.load("auth2")},this.handleUser=async t=>{if(!s.a||"function"!=typeof s.a.federatedSignIn||"function"!=typeof s.a.currentAuthenticatedUser)throw new Error(h.d);try{window.localStorage.setItem(h.s,JSON.stringify({provider:"google"}))}catch(o){w.debug("Failed to cache auth source into localStorage",o)}const{id_token:e,expires_at:n}=t.getAuthResponse(),i=t.getBasicProfile();await s.a.federatedSignIn("google",{token:e,expires_at:n},{email:i.getEmail(),name:i.getName(),picture:i.getImageUrl()});const a=await s.a.currentAuthenticatedUser();try{this.handleAuthStateChange(r.a.SignedIn,a)}catch(c){this.handleError(c)}}}getAuthInstance(){return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init({client_id:this.clientId,cookiepolicy:"single_host_origin",scope:"profile email openid"}):null}signInWithGoogle(t){t.preventDefault(),this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)}render(){return Object(i.i)("amplify-sign-in-button",{onClick:t=>this.signInWithGoogle(t),provider:"google"},Object(i.i)("script",{onLoad:this.handleLoad,src:"https://apis.google.com/js/api:client.js"}),o.a.get(c.a.SIGN_IN_WITH_GOOGLE))}},b=class{constructor(t){Object(i.k)(this,t),this.config={}}signInWithOAuth(t){t.preventDefault(),s.a.federatedSignIn()}render(){return Object(i.i)("amplify-sign-in-button",{onClick:t=>this.signInWithOAuth(t),provider:"oauth"},this.config.label||o.a.get(c.a.SIGN_IN_WITH_AWS))}}}}]);