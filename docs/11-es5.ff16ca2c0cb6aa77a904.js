function asyncGeneratorStep(e,t,n,a,r,i,o){try{var u=e[i](o),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(a,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){asyncGeneratorStep(i,a,r,o,u,"next",e)}function u(e){asyncGeneratorStep(i,a,r,o,u,"throw",e)}o(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{pptk:function(e,t,n){"use strict";n.r(t),n.d(t,"amplify_amazon_button",(function(){return f})),n.d(t,"amplify_auth0_button",(function(){return g})),n.d(t,"amplify_facebook_button",(function(){return m})),n.d(t,"amplify_google_button",(function(){return w})),n.d(t,"amplify_oauth_button",(function(){return I}));var a=n("bRKV"),r=n("Nt7R"),i=n("JIIv"),o=n("s1tr"),u=n("v4IS"),c=n("yMAf"),s=n("/vcS"),h=n("LBa2"),l=new r.a("amplify-amazon-button"),f=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.k)(this,t),this.handleAuthStateChange=h.d,this.federatedSignIn=function(e){var t=e.access_token,a=e.expires_in;if(t){if(!u.a||"function"!=typeof u.a.federatedSignIn||"function"!=typeof u.a.currentAuthenticatedUser)throw new Error(s.d);var r=1e3*a+(new Date).getTime();window.amazon.Login.retrieveProfile(function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(a){var i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.success){e.next=2;break}return e.abrupt("return",l.debug("Get user Info failed"));case 2:return i={name:a.profile.Name,email:a.profile.PrimaryEmail},e.next=5,u.a.federatedSignIn("amazon",{token:t,expires_at:r},i);case 5:return e.next=7,u.a.currentAuthenticatedUser();case 7:c=e.sent,n.handleAuthStateChange(o.a.SignedIn,c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}return _createClass(e,[{key:"signInWithAmazon",value:function(e){var t=this;e.preventDefault(),window.amazon.Login.setClientId(this.clientId),window.amazon.Login.authorize({scope:"profile"},(function(e){if(e.error)return l.debug("Failed to login with amazon: "+e.error);try{window.localStorage.setItem(s.s,JSON.stringify({provider:"amazon"}))}catch(n){l.debug("Failed to cache auth source into localStorage",n)}t.federatedSignIn(e)}))}},{key:"render",value:function(){var e=this;return Object(a.i)("amplify-sign-in-button",{onClick:function(t){return e.signInWithAmazon(t)},provider:"amazon"},Object(a.i)("script",{src:"https://assets.loginwithamazon.com/sdk/na/login1.js"}),i.a.get(c.a.SIGN_IN_WITH_AMAZON))}}]),e}(),d=new r.a("amplify-auth0-button"),g=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.k)(this,t),this.handleAuthStateChange=h.d,this.handleLoad=function(){var e=u.a.configure().oauth,t=void 0===e?{}:e,a=n.config,r=void 0===a?t.auth0:a;r?(d.debug("auth0 configuration",r),n._auth0||(n._auth0=new window.auth0.WebAuth(r)),n._auth0.parseHash((function(e,t){if(e)d.debug("Failed to parse the url for Auth0",e);else if(t){var a={provider:"auth0",opts:{returnTo:r.returnTo,clientID:r.clientID,federated:r.federated}};try{localStorage.setItem(s.s,JSON.stringify(a))}catch(i){d.debug("Failed to cache auth source into localStorage",i)}n._auth0.client.userInfo(t.accessToken,function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(a,i){var c,s,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=void 0,s=void 0,a?d.debug("Failed to get the user info",a):(c=i.name,s=i.email),e.next=4,u.a.federatedSignIn(r.domain,{token:t.idToken,expires_at:1e3*t.expiresIn+(new Date).getTime()},{name:c,email:s});case 4:return e.next=6,u.a.currentAuthenticatedUser();case 6:h=e.sent,n.handleAuthStateChange(o.a.SignedIn,h);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}else d.debug("Auth0 found no authResult in hash")}))):d.debug("Auth0 is not configured")}}return _createClass(e,[{key:"signInWithAuth0",value:function(e){if(e.preventDefault(),!this._auth0)throw new Error("the auth0 client is not configured");this._auth0.authorize()}},{key:"render",value:function(){var e=this;return Object(a.i)("amplify-sign-in-button",{onClick:function(t){return e.signInWithAuth0(t)},provider:"auth0"},Object(a.i)("script",{onLoad:this.handleLoad,src:"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"}),i.a.get(c.a.SIGN_IN_WITH_AUTH0))}}]),e}(),p=new r.a("amplify-facebook-button"),m=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.k)(this,t),this.handleAuthStateChange=h.d,this.federatedSignIn=function(e){var t=e.accessToken,a=e.expiresIn;if(t){if(!u.a||"function"!=typeof u.a.federatedSignIn||"function"!=typeof u.a.currentAuthenticatedUser)throw new Error(s.d);var r=1e3*a+(new Date).getTime();window.FB.api("/me",{fields:"name,email"},function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(a){var i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={name:a.name,email:a.email},e.next=3,u.a.federatedSignIn("facebook",{token:t,expires_at:r},i);case 3:return e.next=5,u.a.currentAuthenticatedUser();case 5:c=e.sent,n.handleAuthStateChange(o.a.SignedIn,c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},this.getLoginStatus=function(){window.FB.getLoginStatus((function(e){try{window.localStorage.setItem(s.s,JSON.stringify({provider:"facebook"}))}catch(t){p.debug("Failed to cache auth source into localStorage",t)}if("connected"===e.status)return n.federatedSignIn(e.authResponse);n.login()}))},this.login=function(){window.FB.login((function(e){e&&e.authResponse&&n.federatedSignIn(e.authResponse)}),{scope:"public_profile,email"})}}return _createClass(e,[{key:"signInWithFacebook",value:function(e){e.preventDefault(),window.FB.init({appId:this.appId,cookie:!0,xfbml:!1,version:"v5.0"}),this.getLoginStatus()}},{key:"render",value:function(){var e=this;return Object(a.i)("amplify-sign-in-button",{onClick:function(t){return e.signInWithFacebook(t)},provider:"facebook"},Object(a.i)("script",{async:!0,defer:!0,src:"https://connect.facebook.net/en_US/sdk.js"}),i.a.get(c.a.SIGN_IN_WITH_FACEBOOK))}}]),e}(),v=new r.a("amplify-google-button"),w=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.k)(this,t),this.handleAuthStateChange=h.d,this.handleError=function(e){console.error(e)},this.handleLoad=function(){window.gapi.load("auth2")},this.handleUser=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var a,r,i,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.a&&"function"==typeof u.a.federatedSignIn&&"function"==typeof u.a.currentAuthenticatedUser){e.next=2;break}throw new Error(s.d);case 2:try{window.localStorage.setItem(s.s,JSON.stringify({provider:"google"}))}catch(l){v.debug("Failed to cache auth source into localStorage",l)}return a=t.getAuthResponse(),r=a.id_token,i=a.expires_at,c=t.getBasicProfile(),e.next=6,u.a.federatedSignIn("google",{token:r,expires_at:i},{email:c.getEmail(),name:c.getName(),picture:c.getImageUrl()});case 6:return e.next=8,u.a.currentAuthenticatedUser();case 8:h=e.sent;try{n.handleAuthStateChange(o.a.SignedIn,h)}catch(f){n.handleError(f)}case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return _createClass(e,[{key:"getAuthInstance",value:function(){return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init({client_id:this.clientId,cookiepolicy:"single_host_origin",scope:"profile email openid"}):null}},{key:"signInWithGoogle",value:function(e){e.preventDefault(),this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)}},{key:"render",value:function(){var e=this;return Object(a.i)("amplify-sign-in-button",{onClick:function(t){return e.signInWithGoogle(t)},provider:"google"},Object(a.i)("script",{onLoad:this.handleLoad,src:"https://apis.google.com/js/api:client.js"}),i.a.get(c.a.SIGN_IN_WITH_GOOGLE))}}]),e}(),I=function(){function e(t){_classCallCheck(this,e),Object(a.k)(this,t),this.config={}}return _createClass(e,[{key:"signInWithOAuth",value:function(e){e.preventDefault(),u.a.federatedSignIn()}},{key:"render",value:function(){var e=this;return Object(a.i)("amplify-sign-in-button",{onClick:function(t){return e.signInWithOAuth(t)},provider:"oauth"},this.config.label||i.a.get(c.a.SIGN_IN_WITH_AWS))}}]),e}()}}]);